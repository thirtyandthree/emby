define(["exports","./../list/list.js","./../modules/emby-elements/emby-button/emby-button.js","./../modules/emby-elements/emby-itemscontainer/emby-itemscontainer.js","./../modules/common/globalize.js","./../modules/approuter.js","./../modules/common/itemmanager/itemmanager.js","./../modules/maintabsmanager.js","./../components/taskbutton.js"],function(_exports,_list,_embyButton,_embyItemscontainer,_globalize,_approuter,_itemmanager,_maintabsmanager,_taskbutton){function addVirtualFolder(e){var view=this.closest(".view");require(["medialibrarycreator"],function(medialibrarycreator){(new medialibrarycreator).show({collectionTypeOptions:function(){var options=[{name:"",value:""},{value:"movies",message:getLink("MovieLibraryHelp","https://github.com/MediaBrowser/Wiki/wiki/Movie%20naming")},{value:"music"},{value:"tvshows",message:getLink("TvLibraryHelp","https://github.com/MediaBrowser/Wiki/wiki/TV%20naming")}];options.push({value:"audiobooks"}),options.push({value:"books",message:getLink("BookLibraryHelp","https://github.com/MediaBrowser/Wiki/wiki/Book%20naming")}),options.push({value:"games",message:_globalize.default.translate("MessageGamePluginRequired")}),options.push({value:"musicvideos"}),options.push({value:"homevideos"}),options.push({name:_globalize.default.translate("MixedContent"),value:"mixed"});for(var i=1,length=options.length;i<length;i++)options[i].name||(options[i].name=_itemmanager.default.getContentTypeName(options[i].value));return options}().filter(function(f){return!f.hidden}),refresh:"true"===view.getAttribute("data-refreshlibrary")}).then(function(hasChanges){hasChanges&&view.querySelector(".itemsContainer").notifyRefreshNeeded(!0)})})}function getLink(text,url){return _globalize.default.translate(text,'<a is="emby-linkbutton" class="button-link" href="'+url+'" target="_blank" data-autohide="true">',"</a>")}function getTabs(){return[{href:"librarysetup/libraries",name:_globalize.default.translate("Libraries")},{href:"librarysetup/advanced",name:_globalize.default.translate("Advanced")}]}function onWizardNextClick(){_approuter.default.show("wizard/wizardsettings.html")}function LibrarySetupPage(view,params){params.serverId=ApiClient.serverId(),this.supportsViewSettings=!1,this.hasOtherViewButtons=!0;var addScanButton=this.enableAlphaNumericShortcuts=!1,params=(-1===window.location.href.toString().toLowerCase().indexOf("wizard")&&(view.classList.add("withTabs"),view.setAttribute("data-refreshlibrary","true"),addScanButton=!0),_list.default.call(this,view,params),this.itemsContainer.refreshOnItemUpdated=!0,view.querySelector(".btnWizardNext"));params&&params.addEventListener("click",onWizardNextClick),function(view,addScanButton){var view=view.querySelector(".listTotalRecordCount"),html='<button is="emby-button" type="button" class="itemsViewSettingsContainer-button raised raised-mini btnNewLibrary submit" style="margin-left:.5em;" title="'+_globalize.default.translate("HeaderNewLibrary")+'" aria-label="'+_globalize.default.translate("HeaderNewLibrary")+'"><i class="md-icon button-icon button-icon-left">&#xE145;</i><span class="emby-button-text">'+_globalize.default.translate("HeaderNewLibrary")+"</span></button>";addScanButton&&(html=html+('<button is="emby-button" type="button" class="itemsViewSettingsContainer-button raised raised-mini btnRefresh submit" style="margin-left:.5em;" title="'+_globalize.default.translate("HeaderScanLibraryFiles")+'" aria-label="'+_globalize.default.translate("HeaderScanLibraryFiles")+'"><i class="md-icon button-icon button-icon-left">refresh</i><span class="emby-button-text">'+_globalize.default.translate("HeaderScanLibraryFiles"))+'</span></button><div class="refreshProgress itemProgressBar itemProgressBarRound hide" style="margin-left:1em;height:.4em;width:10em;"></div>');view.insertAdjacentHTML("afterend",html)}(view,addScanButton),view.querySelector(".btnNewLibrary").addEventListener("click",addVirtualFolder)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,Object.assign(LibrarySetupPage.prototype,_list.default.prototype),LibrarySetupPage.prototype.onResume=function(options){_list.default.prototype.onResume.apply(this,arguments);var view=this.view,btnRefresh=(view.classList.contains("withTabs")&&_maintabsmanager.default.setTabs(this,0,getTabs),view.querySelector(".btnRefresh"));btnRefresh&&(0,_taskbutton.default)({mode:"on",progressElem:view.querySelector(".refreshProgress"),taskKey:"RefreshLibrary",button:btnRefresh})},LibrarySetupPage.prototype.onPause=function(){_list.default.prototype.onPause.apply(this,arguments);var view=this.view,btnRefresh=view.querySelector(".btnRefresh");btnRefresh&&(0,_taskbutton.default)({mode:"off",progressElem:view.querySelector(".refreshProgress"),taskKey:"RefreshLibrary",button:btnRefresh})},LibrarySetupPage.prototype.getItems=function(query){return ApiClient.getVirtualFolders(query)},LibrarySetupPage.prototype.getItemTypes=function(){return["VirtualFolder"]},LibrarySetupPage.prototype.getSettingsKey=function(){return"libraries"},LibrarySetupPage.prototype.getEmptyListMessage=function(){return Promise.resolve("")},LibrarySetupPage.prototype.getItemCountText=function(numItems){return 1===numItems?_globalize.default.translate("OneLibrary"):_globalize.default.translate("LibraryCountValue",numItems)},LibrarySetupPage.prototype.getContext=function(){return null},LibrarySetupPage.prototype.setTitle=function(){},LibrarySetupPage.prototype.getBaseListRendererOptions=function(){var options=_list.default.prototype.getBaseListRendererOptions.apply(this,arguments);return options.draggable=!1,options.draggableXActions=!0,options.multiSelect=!1,options.action="edit",options},LibrarySetupPage.prototype.getCardOptions=function(items,settings){var options=_list.default.prototype.getCardOptions.apply(this,arguments);return Object.assign(options,{shape:"backdrop",fields:["Name","CollectionType","LibraryFolders"],cardLayout:!0,hoverPlayButton:!1,defaultBackground:!0,linkButtonAction:"edit"})},LibrarySetupPage.prototype.getSortMenuOptions=function(){return[]};_exports.default=LibrarySetupPage});